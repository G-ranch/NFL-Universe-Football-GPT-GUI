-- NFL Admin Panel - Fixed Version
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- Character helper
local function getChar()
	local c = player.Character or player.CharacterAdded:Wait()
	local hum = c:WaitForChild("Humanoid")
	local hrp = c:WaitForChild("HumanoidRootPart")
	return c, hrp, hum
end

-- GUI
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "NFLAdminPanel"

local panel = Instance.new("Frame")
panel.Size = UDim2.new(0,400,0,360)
panel.Position = UDim2.new(0.5,-200,0.5,-180)
panel.BackgroundColor3 = Color3.fromRGB(25,25,30)
panel.BackgroundTransparency = 0.2
panel.Active = true
panel.Draggable = true
panel.Parent = gui

local corner = Instance.new("UICorner", panel)
corner.CornerRadius = UDim.new(0.1,0)
local stroke = Instance.new("UIStroke", panel)
stroke.Color = Color3.fromRGB(80,120,255)
stroke.Thickness = 2
stroke.Transparency = 0.4

-- Title
local title = Instance.new("TextLabel", panel)
title.Size = UDim2.new(1,-50,0,40)
title.Position = UDim2.new(0,10,0,0)
title.BackgroundTransparency = 1
title.Text = "üèà NFL ADMIN PANEL"
title.TextColor3 = Color3.fromRGB(200,220,255)
title.TextSize = 20
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize
local minimizeBtn = Instance.new("TextButton", panel)
minimizeBtn.Text = "‚Äî"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 26
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.Size = UDim2.new(0,40,0,40)
minimizeBtn.Position = UDim2.new(1,-45,0,0)
minimizeBtn.BackgroundTransparency = 1

-- Layout
local layout = Instance.new("UIListLayout", panel)
layout.FillDirection = Enum.FillDirection.Vertical
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Center
layout.Padding = UDim.new(0,10)

local function createButton(name)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,280,0,45)
	btn.BackgroundColor3 = Color3.fromRGB(50,60,90)
	btn.Text = name
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 18
	btn.AutoButtonColor = false
	local c = Instance.new("UICorner", btn)
	local s = Instance.new("UIStroke", btn)
	s.Color = Color3.fromRGB(100,140,255)
	s.Transparency = 0.5
	btn.MouseEnter:Connect(function()
		TweenService:Create(btn,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(70,90,140)}):Play()
	end)
	btn.MouseLeave:Connect(function()
		TweenService:Create(btn,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(50,60,90)}):Play()
	end)
	btn.Parent = panel
	return btn
end

local stealBtn = createButton("üèà STEAL BALL")
local magBtn = createButton("üß≤ MAG")
local tackleBtn = createButton("üí• AUTO TACKLE")
local speedBtn = createButton("‚ö° SUPER SPEED (128)")
local noclipBtn = createButton("üö´ NOCLIP")

-- Status
local status = Instance.new("TextLabel", panel)
status.Size = UDim2.new(1,0,0,40)
status.Position = UDim2.new(0,0,1,-40)
status.BackgroundTransparency = 1
status.Font = Enum.Font.GothamBold
status.TextSize = 18
status.Text = "Ready! üòà"
status.TextColor3 = Color3.fromRGB(100,255,100)

-- STEAL BALL
stealBtn.MouseButton1Click:Connect(function()
	local c, hrp, _ = getChar()
	local success = false
	for _,v in pairs(Players:GetPlayers()) do
		if v~=player then
			local ball = workspace:FindFirstChild("Football ("..v.Name..")")
			if ball and ball:FindFirstChild("RightHand") and ball.RightHand:FindFirstChild("Joint") then
				local grip = ball.RightHand.Joint:FindFirstChild("Grip") or ball.RightHand.Joint
				grip.CFrame = c.RightHand.CFrame
				status.Text = "üèà Ball stolen!"
				status.TextColor3 = Color3.fromRGB(0,255,0)
				success = true
				break
			end
		end
	end
	if not success then
		status.Text = "‚ùå No ball found!"
		status.TextColor3 = Color3.fromRGB(255,0,0)
	end
end)

-- MAG
magBtn.MouseButton1Click:Connect(function()
	local c, hrp, _ = getChar()
	local active = true
	status.Text = "üß≤ Chasing ball..."
	status.TextColor3 = Color3.fromRGB(255,255,0)
	task.spawn(function()
		while active do
			local ballObj = nil
			for _,v in pairs(Players:GetPlayers()) do
				local b = workspace:FindFirstChild("Football ("..v.Name..")")
				if b then ballObj = b break end
			end
			if not ballObj then
				status.Text = "‚ùå No football"
				status.TextColor3 = Color3.fromRGB(255,0,0)
				active = false
				break
			end
			local vel = ballObj.Velocity or Vector3.new(0,0,0)
			hrp.CFrame = CFrame.new(ballObj.Position + vel.Unit*3, ballObj.Position)
			local hasBall = ballObj:FindFirstChild("RightHand") and ballObj.RightHand:FindFirstChild("Joint") and ballObj.RightHand.Joint:FindFirstChild("Grip") == c.RightHand
			if hasBall then
				status.Text = "üß≤ Ball caught!"
				status.TextColor3 = Color3.fromRGB(0,255,0)
				active = false
			end
			task.wait(0.05)
		end
	end)
end)

-- AUTO TACKLE
tackleBtn.MouseButton1Click:Connect(function()
	task.spawn(function()
		task.wait(0.1)
		local c, hrp, _ = getChar()
		local targetFound = false
		for _,v in pairs(Players:GetPlayers()) do
			if v~=player then
				local ball = workspace:FindFirstChild("Football ("..v.Name..")")
				if ball then
					local targetHRP = v.Character and v.Character:FindFirstChild("HumanoidRootPart")
					if targetHRP then
						hrp.CFrame = targetHRP.CFrame + targetHRP.CFrame.LookVector
						status.Text = "üí• Auto Tackle!"
						status.TextColor3 = Color3.fromRGB(255,255,0)
						targetFound = true
						break
					end
				end
			end
		end
		if not targetFound then
			status.Text = "‚ùå No ball owner found"
			status.TextColor3 = Color3.fromRGB(255,0,0)
		end
	end)
end)

-- SUPER SPEED
local speedOn = false
speedBtn.MouseButton1Click:Connect(function()
	local _, _, hum = getChar()
	speedOn = not speedOn
	if speedOn then
		hum.WalkSpeed = 128
		speedBtn.Text = "‚ö° SPEED: ON (128)"
		speedBtn.BackgroundColor3 = Color3.fromRGB(50,255,100)
	else
		hum.WalkSpeed = 16
		speedBtn.Text = "‚ö° SUPER SPEED (128)"
		speedBtn.BackgroundColor3 = Color3.fromRGB(50,60,90)
	end
end)

-- NOCLIP
local noclipOn = false
RunService.Stepped:Connect(function()
	local c = player.Character
	if noclipOn and c then
		for _,v in pairs(c:GetDescendants()) do
			if v:IsA("BasePart") then v.CanCollide = false end
		end
	end
end)
noclipBtn.MouseButton1Click:Connect(function()
	noclipOn = not noclipOn
	if noclipOn then
		noclipBtn.Text = "üö´ NOCLIP: ON"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(50,255,100)
	else
		noclipBtn.Text = "üö´ NOCLIP"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(50,60,90)
	end
end)

-- Minimize icon
local icon = Instance.new("TextButton", gui)
icon.Text = "üèà NFL"
icon.Font = Enum.Font.GothamBold
icon.TextSize = 26
icon.TextColor3 = Color3.new(1,1,1)
icon.Size = UDim2.new(0,150,0,150)
icon.BackgroundColor3 = Color3.fromRGB(60,100,255)
icon.BackgroundTransparency = 0.1
icon.Visible = false
icon.Active = true
icon.Draggable = true
local icCorner = Instance.new("UICorner", icon)
icCorner.CornerRadius = UDim.new(0.45,0)
local glow = Instance.new("UIStroke", icon)
glow.Thickness = 2
glow.Color = Color3.fromRGB(140,180,255)
glow.Transparency = 0.3

-- Minimize behavior
minimizeBtn.MouseButton1Click:Connect(function()
	local pos = panel.Position
	TweenService:Create(panel,TweenInfo.new(0.3),{Size=UDim2.new(0,0,0,0),BackgroundTransparency=1}):Play()
	task.wait(0.3)
	panel.Visible = false
	icon.Position = pos
	icon.Visible = true
end)

-- Restore
icon.MouseButton1Click:Connect(function()
	panel.Visible = true
	TweenService:Create(panel,TweenInfo.new(0.3),{Size=UDim2.new(0,400,0,360),BackgroundTransparency=0.2}):Play()
	icon.Visible = false
end)
