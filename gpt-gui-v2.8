-- Delta-Friendly Admin Panel (Client Only)
-- Version 3.3 | Better Steal Ball, Auto Tackle, SuperSpeed, NoClip + Draggable UI

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer

-- // GUI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "DeltaAdminPanel"

local panel = Instance.new("Frame", screenGui)
panel.Size = UDim2.new(0, 210, 0, 300) -- 30% smaller
panel.Position = UDim2.new(0, 50, 0.5, -150)
panel.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
panel.BorderSizePixel = 0
panel.Active = true
panel.Draggable = true

local corner = Instance.new("UICorner", panel)
corner.CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", panel)
title.Size = UDim2.new(1, 0, 0, 28)
title.BackgroundTransparency = 1
title.Text = "âš¡ Delta Admin v3.3"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 14

-- // Make Panel Draggable Anywhere
local dragging, dragStart, startPos
panel.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = panel.Position
	end
end)
UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		panel.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)
UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

local layout = Instance.new("UIListLayout", panel)
layout.Padding = UDim.new(0, 6)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top
layout.SortOrder = Enum.SortOrder.LayoutOrder
title.LayoutOrder = 0

local function newButton(text)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(1, -16, 0, 30)
	b.Position = UDim2.new(0, 8, 0, 0)
	b.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
	b.Text = text
	b.TextColor3 = Color3.fromRGB(255, 255, 255)
	b.Font = Enum.Font.Gotham
	b.TextSize = 13
	b.AutoButtonColor = true
	local c = Instance.new("UICorner", b)
	c.CornerRadius = UDim.new(0, 8)
	return b
end

local statusLabel = Instance.new("TextLabel", panel)
statusLabel.Size = UDim2.new(1, -16, 0, 25)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Ready ðŸ˜Ž"
statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 13
statusLabel.LayoutOrder = 99

local function setStatus(txt, color)
	statusLabel.Text = txt
	statusLabel.TextColor3 = color
	task.delay(2.5, function()
		statusLabel.Text = "Status: Ready ðŸ˜Ž"
		statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
	end)
end

local function getChar()
	local c = player.Character or player.CharacterAdded:Wait()
	return c, c:FindFirstChild("HumanoidRootPart")
end

-- // Smarter Football Finder
local function findFootball()
	local nearest, nearestDist, holderName, held = nil, math.huge, "None", false
	for _, obj in ipairs(Workspace:GetDescendants()) do
		if obj:IsA("BasePart") and obj.Name:lower():find("football") and not obj.Anchored then
			local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
			if hrp then
				local distance = (obj.Position - hrp.Position).Magnitude
				if distance < nearestDist and distance < 500 then
					nearest = obj
					nearestDist = distance
					if obj.Parent and Players:FindFirstChild(obj.Parent.Name) then
						holderName = obj.Parent.Name
						held = true
					else
						holderName = "None"
						held = false
					end
				end
			end
		end
	end
	return nearest, holderName, held
end

-- // Buttons
local stealBtn = newButton("ðŸˆ STEAL BALL")
local tackleBtn = newButton("ðŸ’¥ AUTO TACKLE")
local speedBtn = newButton("âš¡ SUPER SPEED")
local noclipBtn = newButton("ðŸ§± NOCLIP")

stealBtn.LayoutOrder = 1
tackleBtn.LayoutOrder = 2
speedBtn.LayoutOrder = 3
noclipBtn.LayoutOrder = 4
statusLabel.LayoutOrder = 5

stealBtn.Parent = panel
tackleBtn.Parent = panel
speedBtn.Parent = panel
noclipBtn.Parent = panel
statusLabel.Parent = panel

-- // Steal Ball (same smart logic)
local magnetActive, magnetLoop = false, nil
stealBtn.MouseButton1Click:Connect(function()
	magnetActive = not magnetActive
	if magnetActive then
		stealBtn.Text = "ðŸˆ STEALING..."
		stealBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
		setStatus("Moving toward ball!", Color3.fromRGB(255, 200, 50))
		magnetLoop = RunService.Heartbeat:Connect(function()
			local _, hrp = getChar()
			local ball, _, held = findFootball()
			if not hrp or not ball or held then return end
			local distance = (ball.Position - hrp.Position).Magnitude
			if distance < 6 then
				magnetLoop:Disconnect()
				magnetActive = false
				stealBtn.Text = "ðŸˆ STEAL BALL"
				stealBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
				setStatus("âœ… Ball reached!", Color3.fromRGB(100, 255, 100))
				return
			end
			local dir = (ball.Position - hrp.Position).Unit
			local targetPos = ball.Position + dir * 3 + Vector3.new(0, 3, 0)
			pcall(function()
				hrp.CFrame = CFrame.new(targetPos, ball.Position)
			end)
		end)
	else
		if magnetLoop then magnetLoop:Disconnect() end
		stealBtn.Text = "ðŸˆ STEAL BALL"
		stealBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		setStatus("Steal off ðŸ’¤", Color3.fromRGB(150, 150, 150))
	end
end)

-- // Auto Tackle
local tackleActive, tackleLoop = false, nil
tackleBtn.MouseButton1Click:Connect(function()
	tackleActive = not tackleActive
	if tackleActive then
		tackleBtn.Text = "ðŸ’¥ AUTO: ON"
		tackleBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
		setStatus("Chasing carrier!", Color3.fromRGB(255, 200, 50))
		tackleLoop = RunService.Heartbeat:Connect(function()
			local _, hrp = getChar()
			local ball, owner, held = findFootball()
			if hrp and ball and held and owner ~= player.Name then
				local target = Players:FindFirstChild(owner)
				if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
					local tHRP = target.Character.HumanoidRootPart
					local dist = (tHRP.Position - hrp.Position).Magnitude
					if dist > 7 then
						local dir = (tHRP.Position - hrp.Position).Unit
						local pos = tHRP.Position - dir * 5 + Vector3.new(0, 3, 0)
						hrp.CFrame = CFrame.new(pos, tHRP.Position)
					end
				end
			end
		end)
	else
		if tackleLoop then tackleLoop:Disconnect() end
		tackleBtn.Text = "ðŸ’¥ AUTO TACKLE"
		tackleBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		setStatus("Tackle off ðŸ’¤", Color3.fromRGB(150, 150, 150))
	end
end)

-- // Super Speed
local speedActive, speedLoop = false, nil
speedBtn.MouseButton1Click:Connect(function()
	speedActive = not speedActive
	local char, hrp = getChar()
	local hum = char:FindFirstChildOfClass("Humanoid")
	if speedActive then
		speedBtn.Text = "âš¡ SPEED: ON"
		speedBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
		setStatus("SuperSpeed engaged!", Color3.fromRGB(255, 255, 100))
		speedLoop = RunService.Heartbeat:Connect(function()
			if hum then hum.WalkSpeed = 80 end
		end)
	else
		if speedLoop then speedLoop:Disconnect() end
		if hum then hum.WalkSpeed = 16 end
		speedBtn.Text = "âš¡ SUPER SPEED"
		speedBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		setStatus("Speed off ðŸ’¤", Color3.fromRGB(150, 150, 150))
	end
end)

-- // NoClip
local noclipActive, noclipLoop = false, nil
noclipBtn.MouseButton1Click:Connect(function()
	noclipActive = not noclipActive
	if noclipActive then
		noclipBtn.Text = "ðŸ§± NOCLIP: ON"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
		setStatus("NoClip active!", Color3.fromRGB(100, 200, 255))
		noclipLoop = RunService.Stepped:Connect(function()
			local char = player.Character
			if char then
				for _, part in ipairs(char:GetDescendants()) do
					if part:IsA("BasePart") then
						part.CanCollide = false
					end
				end
			end
		end)
	else
		if noclipLoop then noclipLoop:Disconnect() end
		noclipBtn.Text = "ðŸ§± NOCLIP"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		setStatus("NoClip off ðŸ’¤", Color3.fromRGB(150, 150, 150))
	end
end)
