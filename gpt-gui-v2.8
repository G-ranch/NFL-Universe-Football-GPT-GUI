--// NFL Admin Panel v3.1 - Improved Steal Catch + Auto Stop
--// by ChatGPT (safe local-only)

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local char, hum, hrp

local function getChar()
	char = player.Character or player.CharacterAdded:Wait()
	hum = char:WaitForChild("Humanoid")
	hrp = char:WaitForChild("HumanoidRootPart")
	return char, hrp, hum
end

-- Utility: find the football and owner
local function findFootball()
	for _, obj in ipairs(Workspace:GetDescendants()) do
		if obj:IsA("BasePart") and obj.Name:lower():find("football") then
			local parent = obj.Parent
			if parent and Players:FindFirstChild(parent.Name) then
				return obj, parent.Name, true
			else
				return obj, "None", false
			end
		end
	end
end

--// GUI Setup
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "NFLAdminPanel"

-- Panel
local panel = Instance.new("Frame")
panel.Size = UDim2.new(0, 380, 0, 300)
panel.Position = UDim2.new(0.5, -190, 0.5, -150)
panel.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
panel.BackgroundTransparency = 0.2
panel.Active = true
panel.Draggable = true
panel.Visible = true
panel.Parent = gui

local corner = Instance.new("UICorner", panel)
corner.CornerRadius = UDim.new(0.1, 0)

local stroke = Instance.new("UIStroke", panel)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(80, 120, 255)
stroke.Transparency = 0.4

-- Title
local title = Instance.new("TextLabel", panel)
title.Size = UDim2.new(1, -40, 0, 40)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "üèà NFL ADMIN PANEL"
title.TextColor3 = Color3.fromRGB(200, 220, 255)
title.TextSize = 20
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize
local minimizeBtn = Instance.new("TextButton", panel)
minimizeBtn.Text = "‚Äî"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 26
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.Size = UDim2.new(0, 40, 0, 40)
minimizeBtn.Position = UDim2.new(1, -45, 0, 0)
minimizeBtn.BackgroundTransparency = 1

-- Buttons layout
local buttonLayout = Instance.new("UIListLayout", panel)
buttonLayout.Padding = UDim.new(0, 10)
buttonLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
buttonLayout.VerticalAlignment = Enum.VerticalAlignment.Center
buttonLayout.FillDirection = Enum.FillDirection.Vertical

-- Button creator
local function createButton(text)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 280, 0, 45)
	btn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
	btn.Text = text
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 18
	btn.AutoButtonColor = false

	local c = Instance.new("UICorner", btn)
	local s = Instance.new("UIStroke", btn)
	s.Color = Color3.fromRGB(100, 140, 255)
	s.Transparency = 0.5

	btn.MouseEnter:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(70, 90, 140)
		}):Play()
	end)
	btn.MouseLeave:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		}):Play()
	end)

	return btn
end

-- Buttons
local stealBtn = createButton("üèà STEAL BALL")
local tackleBtn = createButton("üí• AUTO TACKLE")
local speedBtn = createButton("‚ö° SUPER SPEED (128)")
local noclipBtn = createButton("üö´ NOCLIP")

stealBtn.Parent = panel
tackleBtn.Parent = panel
speedBtn.Parent = panel
noclipBtn.Parent = panel

-- Status label
local statusLabel = Instance.new("TextLabel", panel)
statusLabel.Size = UDim2.new(1, 0, 0, 40)
statusLabel.Text = "Ready to steal! üòà"
statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
statusLabel.Font = Enum.Font.GothamBold
statusLabel.TextSize = 18
statusLabel.BackgroundTransparency = 1

-- Super Speed
local speedOn = false
speedBtn.MouseButton1Click:Connect(function()
	local _, _, hum = getChar()
	speedOn = not speedOn
	if speedOn then
		hum.WalkSpeed = 128
		speedBtn.Text = "‚ö° SPEED: ON (128)"
		speedBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
	else
		hum.WalkSpeed = 16
		speedBtn.Text = "‚ö° SUPER SPEED (128)"
		speedBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
	end
end)

-- NoClip
local noclipOn = false
noclipBtn.MouseButton1Click:Connect(function()
	noclipOn = not noclipOn
	if noclipOn then
		noclipBtn.Text = "üö´ NOCLIP: ON"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
	else
		noclipBtn.Text = "üö´ NOCLIP"
		noclipBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
	end
end)

RunService.Stepped:Connect(function()
	if noclipOn and char then
		for _, v in pairs(char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = false
			end
		end
	end
end)

-- Steal Ball (fixed to move IN FRONT + auto stop)
local magnetActive = false
local magnetLoop
stealBtn.MouseButton1Click:Connect(function()
	magnetActive = not magnetActive
	if magnetActive then
		local ball, owner, held = findFootball()
		if not ball then
			statusLabel.Text = "‚ùå No football found!"
			statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
			magnetActive = false
			task.wait(2)
			statusLabel.Text = "Ready to steal! üòà"
			statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
			return
		end

		stealBtn.Text = "üèà STEALING: ON"
		stealBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
		statusLabel.Text = "üèà Moving toward ball!"
		statusLabel.TextColor3 = Color3.fromRGB(255, 200, 50)

		magnetLoop = RunService.Heartbeat:Connect(function()
			local _, hrp = getChar()
			if not hrp then return end
			local ball, _, held = findFootball()
			if ball and not held then
				local distance = (ball.Position - hrp.Position).Magnitude
				if distance < 6 then
					-- Stop when close enough to grab
					if magnetLoop then magnetLoop:Disconnect() end
					magnetActive = false
					stealBtn.Text = "üèà STEAL BALL"
					stealBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
					statusLabel.Text = "‚úÖ Ball reached!"
					statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
					task.wait(1.5)
					statusLabel.Text = "Ready to steal! üòà"
					return
				end

				local direction = (ball.Position - hrp.Position).Unit
				local targetPos = ball.Position + direction * 3 + Vector3.new(0, 3, 0)
				pcall(function()
					hrp.CFrame = CFrame.new(targetPos, ball.Position)
				end)
			end
		end)
	else
		if magnetLoop then magnetLoop:Disconnect() end
		stealBtn.Text = "üèà STEAL BALL"
		stealBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		statusLabel.Text = "Ready to steal! üòà"
		statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
	end
end)

-- Auto Tackle
local tackleActive = false
local tackleLoop
tackleBtn.MouseButton1Click:Connect(function()
	tackleActive = not tackleActive
	if tackleActive then
		tackleBtn.Text = "üí• AUTO TACKLE: ON"
		tackleBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
		statusLabel.Text = "üí• Chasing ball carrier!"
		statusLabel.TextColor3 = Color3.fromRGB(255, 255, 100)

		tackleLoop = RunService.Heartbeat:Connect(function()
			local _, hrp = getChar()
			if not hrp then return end
			local ball, ownerName, held = findFootball()
			if ball and held and ownerName then
				local targetPlayer = Players:FindFirstChild(ownerName)
				if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
					local targetHRP = targetPlayer.Character.HumanoidRootPart
					local dir = (targetHRP.Position - hrp.Position).Unit
					local pos = targetHRP.Position - dir * 5 + Vector3.new(0, 3, 0)
					pcall(function()
						hrp.CFrame = CFrame.new(pos, targetHRP.Position)
					end)
				end
			end
		end)
	else
		if tackleLoop then tackleLoop:Disconnect() end
		tackleBtn.Text = "üí• AUTO TACKLE"
		tackleBtn.BackgroundColor3 = Color3.fromRGB(50, 60, 90)
		statusLabel.Text = "Ready to steal! üòà"
		statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
	end
end)

-- Minimize to draggable NFL icon
local nflIcon = Instance.new("TextButton")
nflIcon.Text = "üèà NFL"
nflIcon.Font = Enum.Font.GothamBold
nflIcon.TextSize = 26
nflIcon.TextColor3 = Color3.new(1,1,1)
nflIcon.Size = UDim2.new(0, 150, 0, 150)
nflIcon.BackgroundColor3 = Color3.fromRGB(60, 100, 255)
nflIcon.BackgroundTransparency = 0.1
nflIcon.Visible = false
nflIcon.Active = true
nflIcon.Draggable = true
nflIcon.Parent = gui

local icCorner = Instance.new("UICorner", nflIcon)
icCorner.CornerRadius = UDim.new(0.45, 0)

local glow = Instance.new("UIStroke", nflIcon)
glow.Thickness = 2
glow.Color = Color3.fromRGB(140, 180, 255)
glow.Transparency = 0.3

nflIcon.MouseEnter:Connect(function()
	TweenService:Create(nflIcon, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
		BackgroundColor3 = Color3.fromRGB(100,140,255),
		Size = UDim2.new(0, 165, 0, 165)
	}):Play()
	TweenService:Create(glow, TweenInfo.new(0.25), {Transparency = 0}):Play()
end)
nflIcon.MouseLeave:Connect(function()
	TweenService:Create(nflIcon, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
		BackgroundColor3 = Color3.fromRGB(60,100,255),
		Size = UDim2.new(0, 150, 0, 150)
	}):Play()
	TweenService:Create(glow, TweenInfo.new(0.25), {Transparency = 0.3}):Play()
end)

task.spawn(function()
	while task.wait(2) do
		if nflIcon.Visible then
			TweenService:Create(nflIcon, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Position = nflIcon.Position + UDim2.new(0, 0, 0, -5)
			}):Play()
			task.wait(1)
			TweenService:Create(nflIcon, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Position = nflIcon.Position + UDim2.new(0, 0, 0, 5)
			}):Play()
		end
	end
end)

-- Minimize behavior
minimizeBtn.MouseButton1Click:Connect(function()
	local pos = panel.Position
	TweenService:Create(panel, TweenInfo.new(0.3), {Size = UDim2.new(0,0,0,0), BackgroundTransparency = 1}):Play()
	task.wait(0.3)
	panel.Visible = false
	nflIcon.Position = pos
	nflIcon.Visible = true
end)

-- Restore behavior
nflIcon.MouseButton1Click:Connect(function()
	panel.Position = nflIcon.Position
	panel.Visible = true
	TweenService:Create(panel, TweenInfo.new(0.3), {Size = UDim2.new(0,380,0,300), BackgroundTransparency = 0.2}):Play()
	nflIcon.Visible = false
end)
